<!--Edit Inventory Page-->
<!DOCTYPE html>    
<html>    
<head>    
    <title>Okaidi Auto Sales</title>
    <link rel="stylesheet" href="../CSS templates/EditInventoryStyle.css">
    <script src="../JS/authenticated.js"></script>

</head>    
<body>
    <div class="image-box">
        <a href="Homepage.ejs">
            <img src="https://raw.githubusercontent.com/mseliuzhytski/Bit-by-Bit-Senior-Project/main/Frontend/Images/Logo.png" alt="Okaidi Auto Sales" width="50%" height="10%">
        </a>
    </div>
    <div class="navi">
        <div class="navi-centered">
            <nav id="navbar">
                <div class="nav-menu">
                    <div class="nav-text">
                        <h3 class="nav-text-logo">OKAIDI AUTO SALES</h3>
                        <div class="nav-toggle" id="navToggle">
                            <img class="navIcon"
                                src="https://raw.githubusercontent.com/mseliuzhytski/Bit-by-Bit-Senior-Project/main/Frontend/Images/iconHambMenu.png"
                                alt="hamburger menu" width="25px" id="hamburger">
                            <img class="navIcon hiddenNavIcon"
                                src="https://raw.githubusercontent.com/mseliuzhytski/Bit-by-Bit-Senior-Project/main/Frontend/Images/iconClose.png"
                                alt="close hamburger" width="25px">
                        </div>
                    </div>
                    <div class="navList" id="navShow">
                        <ul class="ulForDir">
                            <li><a href="Homepage.ejs">Home</a></li>
                            <li><a href="Search.ejs">Search</a></li>
                            <li><a href="Aboutus.ejs">About Us</a></li>
                            <li><a href="ContactUs.ejs">Contact Us</a></li>
                            <li><a href="ApplyNow.ejs">Apply Now</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
    </div>
    <div class="text-line-body-1-box">
        <div class="text-line-body-1">
            Find your next car at Okaidi Auto Sales in Sacramento, CA
        </div>
    </div>
    <div class="boby-main">
        <div class="container-box">
        <div class="container">
            <div class="img-box">
                <div class="img-container">
                    <div class="img-main">
                        <% if(imageItems.length == 0){ %>
                            <img src="https://j3v8m9d3.stackpathcdn.com/photos/wfbdUbi/1628630235.png" alt="car" style="width: 600px">
                            <% } else{ %>
                            <img id="mainImg" src=<%=imageItems[0].Car_Image %> alt="car" style="width: 600px">
                            <% } %>
                    </div>
                    <div class="img-collection">
                        <% imageItems.forEach(function(arrImg){ %>
                        <div class="collection-item">
                            <img src=<%= arrImg.Car_Image %> alt="car" style="width: 70px;cursor:pointer;"
                            onclick="changeMain(this)">
                        </div>
                        <% }); %>
                    </div>
                    <div class="img-manage">
                    <form action="/image" enctype="multipart/form-data" method="post">
                        <input type="file" class="img-upload" name="upload_file" multiple><br><br>
                        <input type="hidden" name="Car_Stock_Num" placeholder="Car Stock Num..." value=<%= inventoryItem.Car_Stock_Num %>><br><br>
                        <input type="submit" class="img-upload" value="Submit" class="btn btn-default">
                    </form>
                    <button class="img-delete" onclick="deleteImg(<%= inventoryItem.Car_Stock_Num %>)">Delete Image</button>
                    </div>
                </div>
            </div>
            <div class="info-box">
                <div class="i-container">

                    <form id="carForm" action="/inventory" method="POST">
                        <div class="stock-box">
                            <div class="stock-icon">STOCK:</div>
                            <div class="stock"><%= inventoryItem.Car_Stock_Num %></div>
                            <input type="hidden" id="stockCar" name="Car_Stock_Num" value="<%= inventoryItem.Car_Stock_Num %>"><br>
                        </div>
                        <div class="year-make-model">
                            <div class="year"><%= inventoryItem.Car_Year %></div>
                            <div class="make"><%= inventoryItem.Car_Make %></div>
                            <div class="model"><%= inventoryItem.Car_Model %></div>
                        </div>
                        <div class="car-label">
                            <div class="car-label-year">Year</div>
                            <input type="text" id="yearCar" name="Car_Year" placeholder="Change year..." value="<%= inventoryItem.Car_Year %>" required><br>
                            <div class="car-label-year">Make</div>
                            <input type="text" id="makeCar" name="Car_Make" placeholder="Change make..." value="<%= inventoryItem.Car_Make %>" required><br>
                            <div class="car-label-year">Model</div>
                            <input type="text" id="modelCar" name="Car_Model" placeholder="Change model..." value="<%= inventoryItem.Car_Model %>" required><br>
                        </div>
                        <div class="car-field">
                        <div class="price-box">
                            <div class="price-icon">$</div>
                            <div class="price"><%= inventoryItem.Car_Price %></div>
                            <input type="text" id="priceCar" name="Car_Price" placeholder="Change price..." value="<%= inventoryItem.Car_Price %>" required><br>
                        </div>
                        <div class="mileage-box">
                            <div class="mileage-icon">Mileage:</div>
                            <div class="mileage"><%= inventoryItem.Car_Mileage %></div>
                            <input type="text" id="mileageCar" name="Car_Mileage" placeholder="Change mileage..." value="<%= inventoryItem.Car_Mileage %>" required><br>
                        </div>
                        <div class="cond-box">
                            <div class="cond-icon">Condition:</div>
                            <div class="cond"><%= inventoryItem.Car_Condition %></div>
                            <input type="text" id="conditionCar" name="Car_Condition" placeholder="Change condition.." value="<%= inventoryItem.Car_Condition %>" required><br>
                        </div>
                        <div class="car-body-box">
                            <div class="car-body-icon">Body:</div>
                            <div class="car-body"><%= inventoryItem.Car_BodyType %></div>
                            <input type="text" id="bodyCar" name="Car_BodyType" placeholder="Change body..." value="<%= inventoryItem.Car_BodyType %>" required><br>
                        </div>
                        <div class="color-box">
                            <div class="color-icon">Color:</div>
                            <div class="color"><%= inventoryItem.Car_Color %></div>
                            <input type="text" id="colorCar" name="Car_Color" placeholder="Change color..." value="<%= inventoryItem.Car_Color %>" required><br>
                        </div>
                        </div>
                        <div class="label-manage">
                            <button class="label-save">Save Changes</button>
                        </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
        </div>
    </div>
    <div class="footer">
        <div class="foot-flex">
        <div class="footer-section">
            <div class="footer-facebook-box">
                <a href="https://www.facebook.com/OkaidiAutoSalesLLC">
                    <img src="https://raw.githubusercontent.com/mseliuzhytski/Bit-by-Bit-Senior-Project/main/Frontend/Images/facebook_icon.png" width="40px" height="40px" style="border-radius: 2px;">
                </a>
            </div>
            <br><font size=+2>1941 El Camino Ave,</font>
            <br> SACRAMENTO, CA 95815
            <br> 916-750-9099
        </div>
        <div class="footer-section-img"><img src="https://j3v8m9d3.stackpathcdn.com/photos/wfbdUbi/1628630235.png" 
            alt="logo">
        </div>
        <div class="footer-section-map"><iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3117.741311338998!2d-121.40302578486073!3d38.60882397961626!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x809ada2b44205a41%3A0x6140aa8f54eec0e9!2sOKAIDI%20AUTO%20SALES!5e0!3m2!1sen!2sus!4v1651356145025!5m2!1sen!2sus" 
             style="border:red;border-width:1pt 1pt 1pt 1pt;border-style: solid;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                </iframe>
        </div> 
	    </div>
        <hr class="footer-hr">
        <div class="footer-end">
            <div class="bottom">
                <a href="LandingPage.ejs"><u>Dealer Login</u></a>
                <br>
            </div>
        </div>
    </div>

    
    <script>
        var navbar = document.getElementById("navbar");
        window.onscroll = function () {
            if (window.pageYOffset > navbar.offsetTop) {
                navbar.classList.add("sticky");
            }
            else {
                navbar.classList.remove("sticky");
            }
        }
    </script>
    <script>
        const navToggle = document.querySelector('#navToggle');
        const navl = document.querySelector('#navShow');
        const navIcon = document.querySelectorAll('.navIcon');
        const hamburger = document.querySelector('#hamburger');

        navToggle.addEventListener("click", () => {
            navl.classList.toggle("openNav")
            navIcon.forEach(icon => {
                icon.classList.toggle("hiddenNavIcon");
            })
        });

        window.addEventListener("resize", () => {
            if (document.body.clientWidth > 720) {
                navl.classList.remove("openNav");
                navIcon.forEach(icon => {
                    icon.classList.add("hiddenNavIcon")
                });
                hamburger.classList.remove("hiddenNavIcon");
            }
        });  
    </script>
    <script>
        function changeMain(element){
            document.getElementById("mainImg").src = element.src;
        }
    </script>
    <script>
        function deleteImg(Car_Stock_Num) {
            var params = {
                "Car_Stock_Num":Car_Stock_Num,
                "Car_Image":document.getElementById("mainImg").src
            }

            let text = "Delete this image?";
            if (confirm(text) == true) {
                var xhttp = new XMLHttpRequest();
                xhttp.open("DELETE", "/image");
                xhttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                xhttp.send(JSON.stringify(params));
                setTimeout(function () {
                    window.location.reload(true);
                }, 650);
            }
        }
    </script>
    
</body>    
</html>  
